--liquibase formatted sql

--changeset jader.belarmino:1
CREATE TABLE states (
  state        VARCHAR2(2) PRIMARY KEY,
  description  VARCHAR2(20)
);
--rollback DROP TABLE states;

--changeset jader.belarmino:2
CREATE TABLE people (
  person_id        NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
  first_name       VARCHAR2(20),
  last_name        VARCHAR2(20),
  phone_number     VARCHAR2(20),
  address_line_1   VARCHAR2(20),
  address_line_2   VARCHAR2(100),
  city             VARCHAR2(20),
  state            VARCHAR2(2),
  zip_code         VARCHAR2(5),
  CONSTRAINT fk_people_state FOREIGN KEY (state) REFERENCES states(state)
);
--rollback DROP TABLE people;

--changeset jader.belarmino:3
CREATE OR REPLACE VIEW people_view AS
SELECT
  person_id,
  first_name,
  last_name,
  phone_number,
  address_line_1,
  address_line_2,
  city,
  state,
  zip_code
FROM people;
--rollback DROP VIEW people_view;
